<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Nutricional Trail - Miquel</title>
    <style>
        :root { --primary: #1e293b; --accent: #10b981; --bg: #f8fafc; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--primary); padding: 20px; line-height: 1.5; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .section { margin-bottom: 30px; padding: 20px; border: 1px solid #e2e8f0; border-radius: 8px; }
        h1, h2, h3 { color: var(--primary); margin-top: 0; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px; }
        label { font-weight: 600; font-size: 0.85rem; display: block; margin-bottom: 5px; color: #475569; }
        input, select { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 6px; box-sizing: border-box; }
        button { background: var(--accent); color: white; border: none; padding: 12px; border-radius: 6px; cursor: pointer; font-weight: bold; width: 100%; text-transform: uppercase; letter-spacing: 0.5px; }
        button:hover { opacity: 0.9; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.95rem; }
        th, td { border: 1px solid #e2e8f0; padding: 12px; text-align: center; }
        th { background: #f1f5f9; font-weight: 600; }
        .total-row { background: #ecfdf5; font-weight: bold; color: #065f46; }
        .tag-container { display: flex; flex-wrap: wrap; gap: 8px; margin: 15px 0; }
        .tag { background: #f1f5f9; padding: 6px 12px; border-radius: 20px; font-size: 0.85rem; border: 1px solid #cbd5e1; display: flex; align-items: center; }
        .tag b { margin-left: 8px; color: #ef4444; cursor: pointer; font-size: 1.1rem; }
        #status { padding: 10px; border-radius: 6px; font-weight: bold; margin-bottom: 20px; background: #fffbeb; color: #b45309; border: 1px solid #fde68a; }
        .status-ok { background: #ecfdf5 !important; color: #065f46 !important; border-color: #a7f3d0 !important; }
    </style>
</head>
<body>

<div class="container">
    <h1>üèîÔ∏è Planificador Nutricional Cient√≠fico</h1>
    <div id="status">‚è≥ Iniciando y buscando alimentos.csv...</div>

    <div class="section">
        <h2>1. Datos Biom√©tricos (Base Metab√≥lica)</h2>
        <div class="grid">
            <div><label>Peso (kg)</label><input type="number" id="peso" value="75"></div>
            <div><label>Altura (cm)</label><input type="number" id="altura" value="180"></div>
            <div><label>Edad</label><input type="number" id="edad" value="35"></div>
            <div><label>G√©nero</label><select id="genero"><option value="hombre">Hombre</option><option value="mujer">Mujer</option></select></div>
        </div>
        <div class="grid">
            <div><label>Mult. D√≠a Alta</label><input type="number" id="mAlta" value="1.6" step="0.1"></div>
            <div><label>Mult. D√≠a Media</label><input type="number" id="mMedia" value="1.45" step="0.1"></div>
            <div><label>Mult. D√≠a Baja</label><input type="number" id="mBaja" value="1.2" step="0.1"></div>
        </div>
        <button onclick="calcularObjetivos()">Paso A: Calcular Objetivos Macro</button>
    </div>

    <div id="resultados" class="section" style="display:none;">
        <h2>2. Desglose de Objetivos por Comida</h2>
        <div id="tablaResumen"></div>
    </div>

    <div id="seccionPlanificador" class="section" style="display:none;">
        <h2>3. Dise√±ador de Receta (Algoritmo Prioridad CH)</h2>
        <div class="grid">
            <div><label>Tipo de Entrenamiento</label><select id="tipoDiaSel"><option value="Alta">D√≠a Alta</option><option value="Media">D√≠a Media</option><option value="Baja">D√≠a Baja</option></select></div>
            <div><label>Comida Objetivo</label><select id="comidaSel"><option value="desayuno">Desayuno</option><option value="comida">Comida</option><option value="merienda">Merienda</option><option value="cena">Cena</option></select></div>
        </div>
        
        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px dashed #cbd5e1;">
            <label>A√±adir Alimentos a la Receta</label>
            <input type="text" id="buscador" list="listaAlimentos" placeholder="Ej: Pan integral, Avena...">
            <datalist id="listaAlimentos"></datalist>
            <button onclick="a√±adirAlimento()" style="background: #3b82f6; margin-top: 10px;">A√±adir Ingrediente</button>
        </div>
        
        <div id="tagsIngredientes" class="tag-container"></div>
        
        <button onclick="generarReceta()" style="background: #0f172a; margin-top: 15px;">Paso B: Ejecutar Cuadre de Gramos</button>
        <div id="resultadoReceta" style="margin-top: 20px;"></div>
    </div>
</div>

<script src="app.js"></script>
</body>
</html>
